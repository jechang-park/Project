<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title th:text="${pageTitle}">건강카테고리</title>
  <link rel="stylesheet" href="" th:href="@{/css/test1.css}">
  <style>

/*질문글자 크기, 색깔*/
.question-section em {
  padding-left: 30px;
  font-size: 16px;
  font-weight: bold;
  color: #999;
}
/*질문 라인*/
p {
  display: block;
  margin-block-start: 1em;
  margin-block-end: 1em;
  margin-inline-start: 0px;
  margin-inline-end: 0px;
  padding-left: 30px;
}
/*질문 언더라인*/
.question-section > ul {
  border-top: 1px solid #eee;
}
.question-answer-wrap {
  padding: 28px 0;
}
/*체크박스 안보이기*/
input[type='checkbox'] {
  display: none;
}
/*라벨 레이아웃*/
.question-answer-wrap {
  display: grid;
  justify-content: left;
  grid-template-columns: repeat(auto-fill, 100px);
  margin-left: 25px;
  gap: 25px 25px;
}
/*라벨 크기, 색, 글자색, 그림자*/
.category {
  display: flex;
  flex-direction: row;
  font-size: 16px;
  font-weight: bold;
  width: 85px;
  height: 85px;
  background-color: #fff;
  text-align: center;
  justify-content: center;
  align-items: center;
  border-radius: 15px;
  box-shadow: rgb(0 0 0 / 20%) 0px 2px 10px 0px;
}
#section {
  display: block;
}
  </style>
</head>
<body>
<div id="survey">
  <div class="survey-wrap">
    <div class="survey-contents">
      <div class="survey-contents-inner">
        <a href="#" class="close-survey" onclick="if(confirm('분석을 종료하시겠습니까?')){ window.location.href='http://localhost:9080'; } return false;">
          <img th:src="@{/images/close2.png}" alt="close" />
        </a>
        <div class="survey-test">
          <nav class="survey-test-header">
            <ul class="step-list-wrap">
              <li data="기본정보">
                <span>기본정보</span>
              </li>
              <img src="/images/right2.png" />
              <li data="증상/불편" class="on">
                <span>증상/불편</span>
              </li>
              <img src="/images/right2.png" />
              <li data="생활습관">
                <span>생활습관</span>
              </li>
              <img src="/images/right2.png" />
              <li data="기타">
                <span>기타</span>
              </li>
            </ul>
          </nav>
          <div class="survey-progress">
            <div id="survey-progress-rate" style="width: 20%"></div>
          </div>
          <div class="survey-question-contens">
            <section class="question-section">
              <em id="qNum">질문 4</em>
              <h2 id="qTitle" maxallowed="1" class>
                <p>고객님이 불편하시거나 걱정되는 3가지를 선택하세요</p>
                <span class></span>
              </h2>
              <p id="qContent"></p>
              <ul class="question-answer-wrap">
                <li class="category">
                  <label class="label-checkbox label-question">
                    <input
                        id="purpose-1"
                        type="checkbox"
                        value="296"
                        class="input-checkbox input-answer"
                        name="answer"
                        data-only="null"
                    />
                    <img src="/images/혈관혈액.png" alt="" />
                    <span>혈액순환</span>
                  </label>
                </li>
                <li class="category">
                  <label class="label-checkbox label-question">
                    <input
                        id="purpose-2"
                        type="checkbox"
                        value="297"
                        class="input-checkbox input-answer"
                        name="answer"
                        data-only="null"
                    />
                    <img src="/images/소화.png" alt="" />
                    <span>소화/장</span>
                  </label>
                </li>
                <li class="category">
                  <label
                      for="purpose-3"
                      class="label-checkbox label-question"
                  >
                    <input
                        id="purpose-3"
                        type="checkbox"
                        value="298"
                        class="input-checkbox input-answer"
                        name="answer"
                        data-only="null"
                    />
                    <img src="/images/피부.png" alt="" />
                    <span>피부</span>
                  </label>
                </li>
                <li class="category">
                  <label
                      for="purpose-4"
                      class="label-checkbox label-question"
                  >
                    <input
                        id="purpose-4"
                        type="checkbox"
                        value="299"
                        class="input-checkbox input-answer"
                        name="answer"
                        data-only="null"
                    />
                    <img src="/images/눈.png" alt="" />
                    <span>눈</span>
                  </label>
                </li>
                <li class="category">
                  <label
                      for="purpose-5"
                      class="label-checkbox label-question"
                  >
                    <input
                        id="purpose-5"
                        type="checkbox"
                        value="300"
                        class="input-checkbox input-answer"
                        name="answer"
                        data-only="null"
                    />
                    <img src="/images/두뇌.png" alt="" />
                    <span>두뇌활동</span>
                  </label>
                </li>
                <li class="category">
                  <label
                      for="purpose-6"
                      class="label-checkbox label-question"
                  >
                    <input
                        id="purpose-6"
                        type="checkbox"
                        value="301"
                        class="input-checkbox input-answer"
                        name="answer"
                        data-only="null"
                    />
                    <img src="/images/피로회복.png" alt="" />
                    <span>피로회복</span>
                  </label>
                </li>
                <li class="category">
                  <label
                      for="purpose-7"
                      class="label-checkbox label-question"
                  >
                    <input
                        id="purpose-7"
                        type="checkbox"
                        value="302"
                        class="input-checkbox input-answer"
                        name="answer"
                        data-only="null"
                    />
                    <img src="/images/관절.png" alt="" />
                    <span>뼈/관절</span>
                  </label>
                </li>
                <li class="category">
                  <label
                      for="purpose-8"
                      class="label-checkbox label-question"
                  >
                    <input
                        id="purpose-8"
                        type="checkbox"
                        value="303"
                        class="input-checkbox input-answer"
                        name="answer"
                        data-only="null"
                    />
                    <img src="/images/면역.png" alt="" />
                    <span>면역</span>
                  </label>
                </li>
                <li class="category">
                  <label
                      for="purpose-9"
                      class="label-checkbox label-question"
                  >
                    <input
                        id="purpose-9"
                        type="checkbox"
                        value="304"
                        class="input-checkbox input-answer"
                        name="answer"
                        data-only="null"
                    />
                    <img src=" /images/모발2.png" alt="" />
                    <span>모발</span>
                  </label>
                </li>
                <li class="category">
                  <label
                      for="purpose-10"
                      class="label-checkbox label-question"
                  >
                    <input
                        id="purpose-10"
                        type="checkbox"
                        value="305"
                        class="input-checkbox input-answer"
                        name="answer"
                        data-only="null"
                    />
                    <img src="/images/항산화.png" alt="" />
                    <span>항산화</span>
                  </label>
                </li>
              </ul>
            </section>
          </div>
          <div class="survey-errormsg"></div>
          <div class="survey-question-footer">
            <button
                id="btn-prev"
                class="btn btn-radius"
                onclick="window.location.href='http://localhost:9080/age'"
            >
              이전
            </button>
            <button
                id="btn-next"
                class="btn btn-radius btn-dark"
                onclick="handleNextClick()"
            >
              다음
            </button>
          </div>
        </div>
      </div>
    </div>
    <script></script>
  </div>
</div>
<script>
      //최대 3개 선택
      const checkboxes = document.getElementsByName('answer');
      let checkedCount = 0;

      checkboxes.forEach(checkbox => {
        checkbox.addEventListener('click', event => {
          if (event.target.checked) {
            checkedCount++;
          } else {
            checkedCount--;
          }

          if (checkedCount > 3) {
            event.target.checked = false;
            checkedCount--;
          }
        });
      });
      //카테고리 색상
      const categories = document.querySelectorAll('.category');

      categories.forEach(category => {
        const checkbox = category.querySelector('input[type="checkbox"]');
        checkbox.addEventListener('click', () => {
          if (checkbox.checked) {
            category.style.border = '2px solid #ff5c35';
          } else {
            category.style.border = 'none';
          }
        });
      });
      //에러메시지
      function handleNextClick() {
        // check if at least one checkbox is selected
        const checkboxes = document.getElementsByName('answer');
        let isChecked = false;
        for (let i = 0; i < checkboxes.length; i++) {
          if (checkboxes[i].checked) {
            isChecked = true;
            break;
          }
        }

        // display error message if no checkbox is selected
        if (!isChecked) {
          const errorMsg = document.querySelector('.survey-errormsg');
          errorMsg.innerText = '답변을 입력해주세요.';
          return;
        }

        // continue to the next question
        window.location.href =
          'http://localhost:9080/dosage';
      }
    </script>
</body>
</html>